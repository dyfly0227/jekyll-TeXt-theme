---
title: 'vue自定义指令'
excerpt: '实现点击除自身以外其他区域而触发事件的指令'
tags: 'vue'
---

```vue
  directives: {
    clickoutside: {
      bind(el, binding, vnode) {
        function documentHandler(e) {
          // 如果是元素本体则返回
          if (el.contains(e.target)) return false;
          if (binding.expression) {
            // 有绑定函数，则执行
            binding.value(e);
          }
        }
        el.__vueClickOutside__ = documentHandler;
        document.addEventListener('click', documentHandler);
      },
      update() {},
      unbind(el, binding) {
        document.removeEventListener('click', el.__vueClickOutside__);
        delete el.__vueClickOutside__;
      },
    },
  }
```
使用
```html
<div v-clickoutside="hideTree"></div>
```