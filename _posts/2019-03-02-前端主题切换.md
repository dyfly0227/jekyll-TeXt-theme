---
title: '前端页面主题颜色切换'
excerpt: '无UI库实现主题切换，以及依赖于Ant Design的主题切换'
tags: 'css'
---

#### 无UI库依赖的主题切换
> 核心思想：css3中的`:root`伪类选择器和`var`变量的应用

1、定义主题变量
```css
:root {
	--theme-color: #ccc;
}
```
2、使用主题变量
```css
.test{
	color: var(--theme-color);
}
```
3、动态改变主题
```javascript
document.documentElement.style.setProperty('--theme-color', '#fff');
```
#### 依赖于Ant Design的主题切换
前提，在`main.js`引入的必须是它的`less`样式文件
```javascript
import 'ant-design-vue/dist/antd.less'
```
#### 两种方案：
1. 使用`antd-theme-webpack-plugin`插件提取`antd.less`跟颜色有关系中的样式到指定文件，然后再引入这个文件，这样就会覆盖`antd.less`中的样式，具体方法百度
2. 直接下载提取后的文件[点击下载](https://gitee.com/yingmhd2020/components/tree/master/antdTheme)，然后在`index.html`中引用
	```html
	<body>
		// 必须放在body里面，得保证在antd.less之后加载，这样才能覆盖
		<link rel="stylesheet/less" type="text/css" href="/color.less">
		// js必须放在css的后面，这样才能解析它
		<script src="/less.js"></script>
	</body>
	```
	`color.less`里面有一句
	```css
	:root {
		--primary-color: @primary-color;
	}
	```
	如此，书写页面时使用`var(--theme-color)`即可
	
	改变主题颜色
	```javascript
	window.less.modifyVars({
		'@primary-color': '#722ED1',
	})
	```