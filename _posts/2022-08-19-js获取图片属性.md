---
title: 'js获取图片属性'
excerpt: '获取图片的大小以及宽高'
tags: 'js'
---
```ts
const regArr = /data:image\/(.+?);/.exec(params.src)
  if (regArr) {
    const extension = regArr[1].toUpperCase()
    const img = new Image()
    img.src = params.src
    const strLength = params.src.length
    const fileLength = parseInt((strLength - (strLength / 8) * 2).toString())
    const size = (fileLength / 1024).toFixed(2)
    img.onload = function () {
      const wh = img.width + 'x' + img.height
      store.commit('SET_IMAGE_PREVIEW_DATA', {
        visible: true,
        src: params.src,
        name: params.name,
        extension,
        requireExtension: params.requireExtension,
        size,
        requireSize: params.requireSize,
        wh,
        requireWh: params.requireWh
      })
    }
  }
```