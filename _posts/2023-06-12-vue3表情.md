---
title: 'vue3表情'
excerpt: 'vue3项目中，输入框表情'
tags: 'vue'
---

### 安装emoji库
```bash
npm i vue3-emoji-picker
```
git地址<https://github.com/delowardev/vue3-emoji-picker>
### 项目中引入
```js
import EmojiPicker from "vue3-emoji-picker";
// import css
import "vue3-emoji-picker/css";
```
### 加载组件


```html
<EmojiPicker
  :native="true"
  @update:text="onSelectEmoji"
  pickerType="input"
  :hide-search="true"
  :disable-skin-tones="true"
  mode="prepend"
/>
<input
  type="textarea"
  v-model="inputVal"
  placeholder="Type a message"
  @keyup.enter.native="sendMsg"
/>
```

`pickerType`用的是`input`，这样就可以触发`@update:text`事件，`@update:text`的参数是输入的所有表情，每当有表情输入时，因为`mode="prepend"`，所以最新的表情在第一位，将第一个表情取出插入`input`的`inputVal`即可。

```js
const inputVal = ref("");
const onSelectEmoji = (text) => {
  // 一个表情占两个字符
  inputVal.value += text.slice(0, 2);
};
```
同时要隐藏组件原有的input框
```less
:deep(.v3-emoji-picker-input) {
  visibility: hidden;
}
// 同时调整原有组件表情图标的位置
:deep(.v3-input-picker-icon) {
  transform: translate(12px, -21px);
}
```